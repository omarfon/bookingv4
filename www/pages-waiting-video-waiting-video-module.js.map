{"version":3,"sources":["./src/app/pages/waiting-video/waiting-video.page.html","./src/app/pages/waiting-video/waiting-video-routing.module.ts","./src/app/pages/waiting-video/waiting-video.module.ts","./src/app/pages/waiting-video/waiting-video.page.scss","./src/app/pages/waiting-video/waiting-video.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,qfAAsb,eAAe,2BAA2B,MAAM,8BAA8B,uBAAuB,eAAe,mPAAmP,iCAAiC,oIAAoI,E;;;;;;;;;;;;;;;;;;;ACAx6B;AACc;AAEC;AAExD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,oEAAgB;KAC5B;CACF,CAAC;AAMF,IAAa,6BAA6B,GAA1C,MAAa,6BAA6B;CAAG;AAAhC,6BAA6B;IAJzC,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,6BAA6B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;AChBD;AACM;AACF;AAEA;AAEkC;AAEvB;AAWxD,IAAa,sBAAsB,GAAnC,MAAa,sBAAsB;CAAG;AAAzB,sBAAsB;IATlC,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,2FAA6B;SAC9B;QACD,YAAY,EAAE,CAAC,oEAAgB,CAAC;KACjC,CAAC;GACW,sBAAsB,CAAG;AAAH;;;;;;;;;;;;;ACnBnC;AAAe,6EAAc,kBAAkB,4BAA4B,wBAAwB,GAAG,QAAQ,qBAAqB,qBAAqB,qBAAqB,mBAAmB,sBAAsB,GAAG,OAAO,qBAAqB,qBAAqB,qBAAqB,mBAAmB,sBAAsB,GAAG,gBAAgB,iCAAiC,qBAAqB,GAAG,6CAA6C,msDAAmsD,E;;;;;;;;;;;;;;;;;;;;;;ACAllE;AACO;AACC;AACM;AACqB;AACrB;AACR;AAQxD,IAAa,gBAAgB,GAA7B,MAAa,gBAAgB;IAQ3B,YAAmB,MAAsB,EAChC,MAAc,EACd,GAAkB,EAClB,aAAsC,EACtC,SAA0B,EAC1B,GAAiB;QALP,WAAM,GAAN,MAAM,CAAgB;QAChC,WAAM,GAAN,MAAM,CAAQ;QACd,QAAG,GAAH,GAAG,CAAe;QAClB,kBAAa,GAAb,aAAa,CAAyB;QACtC,cAAS,GAAT,SAAS,CAAiB;QAC1B,QAAG,GAAH,GAAG,CAAc;QAVnB,gBAAW,GAAG,uEAAU,CAAC;QAW9B,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACvD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACnC,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;IAClD,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED,WAAW;QACT,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC,GAAG,EAAE;YAChC,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC5B,CAAC,EAAE,KAAK,CAAC,CAAC;QAEV;;aAEK;IACP,CAAC;IACD,YAAY,CAAC,KAAK;QAChB,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,GAAG,0LAA0L;IACrN,CAAC;IAED,SAAS;QACP,OAAO,CAAC,GAAG,CAAC,qCAAqC,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACzF,MAAM,GAAG,GAAG,qEAAQ,CAAC;QACrB,MAAM,KAAK,GAAG,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;QAChE,MAAM,YAAY,GAAG,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;QACxE,MAAM,gBAAgB,GAAG,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,CAAC;QAC9E,MAAM,qBAAqB,GAAG,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,qBAAqB,CAAC,CAAC;QACxF,MAAM,qBAAqB,GAAG,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,qBAAqB,CAAC,CAAC;QACxF,MAAM,uBAAuB,GAAG,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,uBAAuB,CAAC,CAAC;QAC5F,MAAM,SAAS,GAAG,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QAChE,MAAM,OAAO,GAAG,kBAAkB,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QAChE,IAAI,OAAO,GAAG,uDAAuD,CAAC;QACtE,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,GAAG,+BAA+B,KAAK,+BAA+B,uBAAuB,sBAAsB,YAAY,wBAAwB,gBAAgB,8BAA8B,qBAAqB,8BAA8B,qBAAqB,iBAAiB,SAAS,eAAe,OAAO,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;IAE9X,CAAC;IAGD,kBAAkB;QAChB,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC;QAC1C,IAAI,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC;QACjD,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,KAAK,IAAI,EAAE;YACrC,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC,SAAS,CAAC,CAAM,IAAI,EAAC,EAAE,CAAC;gBACjF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK;gBACvB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;gBAC3B,IAAI,IAAI,CAAC,KAAK,KAAK,EAAE,EAAE;oBACrB,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;iBACnC;qBACI,IAAI,IAAI,CAAC,KAAK,KAAK,YAAY,EAAE;oBACpC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;oBAC/B,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;wBACxC,MAAM,EAAE,gBAAgB;wBACxB,SAAS,EAAE,4BAA4B;wBACvC,OAAO,EAAE;4BACP;gCACE,IAAI,EAAE,IAAI;6BACX;yBACF;qBACF,CAAC,CAAC;oBACH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;oBACtB,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBAC/B;qBACI;oBACH,qCAAqC;oBACrC,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;oBAC7C,IAAI,CAAC,SAAS,EAAE,CAAC;oBACjB,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBAC9B,IAAI,CAAC,QAAQ,EAAE,CAAC;iBACjB;gBACD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACpB,CAAC,GAAE,GAAG,CAAC,EAAE;gBACP,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC;YAClB,CAAC,CAAC;SACH;aAAM;YACL,IAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC,CAAM,IAAI,EAAC,EAAE,CAAC;gBAC3E,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;gBAC3B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK;gBACvB,IAAI,IAAI,CAAC,KAAK,KAAK,EAAE,EAAE;oBACrB,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;iBACnC;qBACI,IAAI,IAAI,CAAC,KAAK,KAAK,YAAY,EAAE;oBACpC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;oBAC/B,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;wBACxC,MAAM,EAAE,gBAAgB;wBACxB,SAAS,EAAE,4BAA4B;wBACvC,OAAO,EAAE;4BACP;gCACE,IAAI,EAAE,IAAI;6BACX;yBACF;qBACF,CAAC,CAAC;oBACH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;oBACtB,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBAC/B;qBACI;oBACH,qCAAqC;oBACrC,IAAI,CAAC,SAAS,EAAE,CAAC;oBACjB,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBAC9B,IAAI,CAAC,QAAQ,EAAE,CAAC;iBACjB;gBACD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACpB,CAAC,GAAE,GAAG,CAAC,EAAE;gBACP,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC;YAClB,CAAC,CAAC;SACH;IACH,CAAC;IAED,QAAQ;QACN,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC9B,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;IAClB,CAAC;CAEF;;YAvH4B,8DAAc;YACxB,sDAAM;YACT,4DAAa;YACH,kGAAuB;YAC3B,8DAAe;YACrB,6EAAY;;AAbf,gBAAgB;IAL5B,+DAAS,CAAC;QACT,QAAQ,EAAE,mBAAmB;QAC7B,+OAAwC;;KAEzC,CAAC;GACW,gBAAgB,CA+H5B;AA/H4B","file":"pages-waiting-video-waiting-video-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <!-- <ion-back-button slot=\\\"start\\\"></ion-back-button> -->\\n      <ion-icon name=\\\"arrow-back\\\" slot=\\\"start\\\" (click)=\\\"goToBack()\\\" class=\\\"iconoback\\\">volver</ion-icon>\\n    </ion-buttons>\\n    <ion-title>Volver</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-slides>\\n    <ion-slide\\n      style=\\\"background-image:url({{SERVERImage}}{{dataDoctor.professionalId}}.png); background-repeat: no-repeat; background-size:cover; height: 100vh;\\\"\\n      (error)=\\\"errorHandler($event)\\\">\\n      <ion-row>\\n        <ion-col size=\\\"6\\\">\\n          <h1>En Espera...</h1>\\n        </ion-col>\\n        <ion-col size=\\\"6\\\"></ion-col>\\n        <ion-col size=\\\"6\\\">\\n          <p>El doctor <b>{{dataDoctor.professionalFullName}}</b> estar√° contigo en breves momentos</p>\\n        </ion-col>\\n      </ion-row>\\n    </ion-slide>\\n  </ion-slides>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { WaitingVideoPage } from './waiting-video.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: WaitingVideoPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class WaitingVideoPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { WaitingVideoPageRoutingModule } from './waiting-video-routing.module';\n\nimport { WaitingVideoPage } from './waiting-video.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    WaitingVideoPageRoutingModule\n  ],\n  declarations: [WaitingVideoPage]\n})\nexport class WaitingVideoPageModule {}\n","export default \"ion-content {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\nh1 {\\n  font-size: 2.2em;\\n  font-weight: 600;\\n  text-align: left;\\n  color: #00a8cc;\\n  margin-left: 20px;\\n}\\n\\np {\\n  font-size: 1.2em;\\n  font-weight: 400;\\n  text-align: left;\\n  color: #00a8cc;\\n  margin-left: 20px;\\n}\\n\\n.iconoback {\\n  margin-left: 20px !important;\\n  font-size: 1.4em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9vbWFyL3Byb3llY3Rvcy9EZXYvYm9va2luZ3Y0L3NyYy9hcHAvcGFnZXMvd2FpdGluZy12aWRlby93YWl0aW5nLXZpZGVvLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvd2FpdGluZy12aWRlby93YWl0aW5nLXZpZGVvLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0FDQ0o7O0FERUE7RUFDSSxnQkFBQTtFQUNBLGdCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxjQUFBO0VBQ0EsaUJBQUE7QUNDSjs7QURFQTtFQUNJLGdCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxnQkFBQTtFQUNBLGNBQUE7RUFDQSxpQkFBQTtBQ0NKOztBREVBO0VBQ0ksNEJBQUE7RUFDQSxnQkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvd2FpdGluZy12aWRlby93YWl0aW5nLXZpZGVvLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbmgxIHtcbiAgICBmb250LXNpemU6IDIuMmVtO1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICBjb2xvcjogIzAwYThjYztcbiAgICBtYXJnaW4tbGVmdDogMjBweDtcbn1cblxucCB7XG4gICAgZm9udC1zaXplOiAxLjJlbTtcbiAgICBmb250LXdlaWdodDogNDAwO1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgY29sb3I6ICMwMGE4Y2M7XG4gICAgbWFyZ2luLWxlZnQ6IDIwcHg7XG59XG5cbi5pY29ub2JhY2sge1xuICAgIG1hcmdpbi1sZWZ0OiAyMHB4ICFpbXBvcnRhbnQ7XG4gICAgZm9udC1zaXplOiAxLjRlbTtcbn0iLCJpb24tY29udGVudCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG5oMSB7XG4gIGZvbnQtc2l6ZTogMi4yZW07XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG4gIGNvbG9yOiAjMDBhOGNjO1xuICBtYXJnaW4tbGVmdDogMjBweDtcbn1cblxucCB7XG4gIGZvbnQtc2l6ZTogMS4yZW07XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG4gIGNvbG9yOiAjMDBhOGNjO1xuICBtYXJnaW4tbGVmdDogMjBweDtcbn1cblxuLmljb25vYmFjayB7XG4gIG1hcmdpbi1sZWZ0OiAyMHB4ICFpbXBvcnRhbnQ7XG4gIGZvbnQtc2l6ZTogMS40ZW07XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { API_IMAGES } from 'src/environments/environment';\nimport { NavController, AlertController } from '@ionic/angular';\nimport { PermissionsVideoService } from 'src/app/services/permissions-video.service';\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\nimport { OPENTELE } from 'src/environments/environment';\n\n\n@Component({\n  selector: 'app-waiting-video',\n  templateUrl: './waiting-video.page.html',\n  styleUrls: ['./waiting-video.page.scss'],\n})\nexport class WaitingVideoPage implements OnInit {\n\n  public dataDoctor;\n  public SERVERImage = API_IMAGES;\n  token: any;\n  resultado;\n  public permisionsData: any;\n\n  constructor(public routes: ActivatedRoute,\n    public router: Router,\n    public nav: NavController,\n    public permissionSrv: PermissionsVideoService,\n    public alertCtrl: AlertController,\n    public iab: InAppBrowser) {\n    const data = this.routes.snapshot.paramMap.get('data');\n    this.dataDoctor = JSON.parse(data);\n    console.log('thisdataDoctor:', this.dataDoctor);\n  }\n\n  ngOnInit() {\n    this.verifyToken();\n  }\n\n  verifyToken() {\n    this.resultado = setInterval(() => {\n      this.getPermissionVideo();\n    }, 10000);\n\n    /*  if (this.token != '') {\n       clearInterval(this.resultado);\n     } */\n  }\n  errorHandler(event) {\n    event.target.src.style = \"background-image:url(https://1.bp.blogspot.com/-p8EFlkXywyE/UDZvWTyr1bI/AAAAAAAAEU0/xL8pmKN1KOY/s1600/facebook.png); background-repeat: no-repeat; background-size:cover; height: 100vh;\"\n  }\n\n  openVideo() {\n    console.log('resultado de la data para permisos:', this.permisionsData, this.dataDoctor);\n    const url = OPENTELE;\n    const appId = encodeURIComponent(this.dataDoctor.appointmentId);\n    const professional = encodeURIComponent(this.dataDoctor.professionalId);\n    const professionalName = encodeURIComponent(this.dataDoctor.professionalName);\n    const professionalLastName1 = encodeURIComponent(this.dataDoctor.professionalLastName1);\n    const professionalLastName2 = encodeURIComponent(this.dataDoctor.professionalLastName2);\n    const basicServiceDescription = encodeURIComponent(this.dataDoctor.basicServiceDescription);\n    const patientId = encodeURIComponent(this.dataDoctor.patientId);\n    const channel = encodeURIComponent(this.permisionsData.channel);\n    let options = \"location=yes,hidden=yes,beforeload=yes,hideurlbar=yes\";\n    const browser = this.iab.create(`${url}/telecon/%7B\"appointmentId\":${appId},\"basicServiceDescription\":\"${basicServiceDescription}\",\"professionalId\":${professional},\"professionalName\":\"${professionalName}\",\"professionalLastName1\":\"${professionalLastName1}\",\"professionalLastName2\":\"${professionalLastName2}\",\"patientId\":${patientId},\"channel\":\"${channel}\"%7D`, '_system', options);\n\n  }\n\n\n  getPermissionVideo() {\n    let patientId = this.dataDoctor.patientId;\n    let appoinmentid = this.dataDoctor.appointmentId;\n    if (this.dataDoctor.familiar === true) {\n      this.permissionSrv.getAuthoParent(appoinmentid, patientId).subscribe(async data => {\n        this.token = data.token\n        this.permisionsData = data;\n        if (this.token === \"\") {\n          console.log('aun no llega token');\n        }\n        else if (this.token === 'finalizado') {\n          this.router.navigate(['home']);\n          const alert = await this.alertCtrl.create({\n            header: 'Cita Terminada',\n            subHeader: 'Esta cita ya ha finalizado',\n            buttons: [\n              {\n                text: 'ok'\n              }\n            ]\n          });\n          await alert.present();\n          clearInterval(this.resultado);\n        }\n        else {\n          /*  clearInterval(this.resultado); */\n          const data = JSON.stringify(this.dataDoctor);\n          this.openVideo();\n          clearInterval(this.resultado);\n          this.goToBack();\n        }\n        console.log(data);\n      }, err => {\n        console.log(err)\n      })\n    } else {\n      this.permissionSrv.getPermissionsVideo(appoinmentid).subscribe(async data => {\n        this.permisionsData = data;\n        this.token = data.token\n        if (this.token === \"\") {\n          console.log('aun no llega token');\n        }\n        else if (this.token === 'finalizado') {\n          this.router.navigate(['home']);\n          const alert = await this.alertCtrl.create({\n            header: 'Cita Terminada',\n            subHeader: 'Esta cita ya ha finalizado',\n            buttons: [\n              {\n                text: 'ok'\n              }\n            ]\n          });\n          await alert.present();\n          clearInterval(this.resultado);\n        }\n        else {\n          /*  clearInterval(this.resultado); */\n          this.openVideo();\n          clearInterval(this.resultado);\n          this.goToBack();\n        }\n        console.log(data);\n      }, err => {\n        console.log(err)\n      })\n    }\n  }\n\n  goToBack() {\n    clearInterval(this.resultado);\n    this.nav.back();\n  }\n\n}\n"],"sourceRoot":"webpack:///"}